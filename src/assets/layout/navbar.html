<!-- navbar.html -->
<link rel="stylesheet" href="/src/assets/css/navbar.css">

<header>
    <div id="left-menu-items">
        <nav id="logo-container">
            <img id="logo" src="/src/assets/img/logo.png" alt="Purely Homemade Logo" />
            <span id="logo-name">Purely Homemade</span>
        </nav>
        <nav id="menu-container">
            <a class="menu-items" href="/index.html">Home</a>
            <a class="menu-items" href="/src/views/products.html">Products</a>
            <a class="menu-items" id="orders-menu-item" href="/src/views/admin/order_management.html" style="display: none;">Orders</a>
            <a class="menu-items" href="/src/views/about.html">Our Story</a>
        </nav>
    </div>
    <div id="right-menu-items">
        <a href="/src/views/checkout/cart.html" class="menu-items" title="View Cart">
            <span style="margin-right: 5px;">ğŸ›’</span> Cart
        </a>
        <a id="account-button" href="/src/views/auth/profile.html" class="menu-items" title="Your Profile" style="display: none;">
            <span style="margin-right: 5px;">ğŸ‘¤</span> Account
        </a>
        <a id="login-button" href="/src/views/auth/login.html" class="menu-items">
            <span style="margin-right: 5px;">ğŸ”‘</span> Login
        </a>
        <a id="logout-button" href="#" class="menu-items" style="display: none;">
            <span style="margin-right: 5px;">ğŸšª</span> Logout
        </a>
    </div>
</header>

<script>
    // ç«‹å³æ‰§è¡Œï¼Œä¸ç­‰å¾…DOMContentLoadedï¼Œå› ä¸ºè¿™ä¸ªè„šæœ¬åœ¨DOMå…ƒç´ ä¹‹å
    (function() {
        const loginButton = document.getElementById('login-button');
        const logoutButton = document.getElementById('logout-button');
        const ordersMenuItem = document.getElementById('orders-menu-item');
        const accountButton = document.getElementById('account-button');
        
        // ä»localStorageæ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€
        const currentUser = localStorage.getItem('currentUser');
        const isAdmin = localStorage.getItem('isAdmin') === 'true';
        
        if (currentUser) {
            // ç”¨æˆ·å·²ç™»å½•ï¼Œæ˜¾ç¤ºç™»å‡ºæŒ‰é’®å’Œè´¦æˆ·æŒ‰é’®
            loginButton.style.display = 'none';
            logoutButton.style.display = 'inline-block';
            accountButton.style.display = 'inline-block';
            
            // å¦‚æœæ˜¯ç®¡ç†å‘˜ï¼Œæ˜¾ç¤ºOrdersèœå•
            if (isAdmin) {
                ordersMenuItem.style.display = 'inline-block';
            }
            
            // æ·»åŠ ç™»å‡ºåŠŸèƒ½
            logoutButton.addEventListener('click', function(e) {
                e.preventDefault();
                // æ¸…é™¤ç™»å½•ä¿¡æ¯
                localStorage.removeItem('currentUser');
                localStorage.removeItem('isAdmin');
                // é‡å®šå‘åˆ°é¦–é¡µ
                window.location.href = '/index.html';
            });
        } else {
            // ç”¨æˆ·æœªç™»å½•ï¼Œæ˜¾ç¤ºç™»å½•æŒ‰é’®ï¼ˆé»˜è®¤å·²æ˜¾ç¤ºï¼Œæ­¤å¤„ç¡®ä¿é€»è¾‘å®Œæ•´ï¼‰
            loginButton.style.display = 'inline-block';
            logoutButton.style.display = 'none';
            accountButton.style.display = 'none';
        }
    })();
</script>