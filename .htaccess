# PurelyHandmade .htaccess 文件
# 用于路由前端和API请求

# 启用重写引擎
RewriteEngine On

# 设置基本URL（如果在子目录中）
# RewriteBase /purelyhandmade/

# 如果是实际存在的文件或目录，直接访问
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 处理API请求
RewriteRule ^api/([^/]+)\.php$ src/server/api/$1/$2.php [QSA,L]
RewriteRule ^api/(.*)$ src/server/api.php [QSA,L]

# 如果请求的是客户端文件，进行路由
RewriteRule ^client/(.*)$ src/client/$1 [QSA,L]

# 其他所有请求都路由到主入口文件
RewriteRule ^(.*)$ src/index.php [QSA,L]

# PHP设置
php_flag display_errors on
php_value error_reporting E_ALL

# 设置默认字符集
AddDefaultCharset UTF-8

# 禁止访问敏感文件
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# 禁止访问PHP错误日志
<Files error_log>
    Order allow,deny
    Deny from all
</Files>

# 定义默认文档
DirectoryIndex src/index.php 